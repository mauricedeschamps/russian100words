<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ­ã‚·ã‚¢èªåŸºæœ¬å˜èª100</title>
    <meta name="description" content="æœ€åˆã«å­¦ã¶ã¹ããƒ­ã‚·ã‚¢èªåŸºæœ¬å˜èª100èª">
    <meta name="theme-color" content="#1a202c">
    
    <!-- PWAè¨­å®š -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icons/icon-192x192.png" type="image/png">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    
    <!-- ã‚¹ã‚¿ã‚¤ãƒ« -->
    <style>
        :root {
            --primary-dark: #1a202c;
            --secondary-dark: #2d3748;
            --text-dark: #e2e8f0;
            --accent-dark: #4299e1;
            --primary-light: #f7fafc;
            --secondary-light: #edf2f7;
            --text-light: #2d3748;
            --accent-light: #3182ce;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            background-color: var(--primary-dark);
            color: var(--text-dark);
            min-height: 100vh;
            padding-bottom: 80px;
        }

        body.light-mode {
            background-color: var(--primary-light);
            color: var(--text-light);
        }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        header {
            background-color: var(--secondary-dark);
            padding: 1rem 2rem;
            border-bottom: 3px solid var(--accent-dark);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        body.light-mode header {
            background-color: var(--secondary-light);
            border-bottom-color: var(--accent-light);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            font-size: 1.8rem;
            color: var(--accent-dark);
            text-align: center;
            flex-grow: 1;
        }

        body.light-mode h1 {
            color: var(--accent-light);
        }

        /* ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒãƒ¼ */
        .controls {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 2rem;
        }

        .control-group {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        button {
            padding: 0.75rem 1.5rem;
            background-color: var(--accent-dark);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: transform 0.2s, opacity 0.2s;
        }

        body.light-mode button {
            background-color: var(--accent-light);
        }

        button:hover {
            transform: translateY(-2px);
            opacity: 0.9;
        }

        button:active {
            transform: translateY(0);
        }

        .mode-btn {
            background-color: var(--secondary-dark);
        }

        body.light-mode .mode-btn {
            background-color: var(--secondary-light);
            color: var(--text-light);
        }

        /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* å˜èªã‚«ãƒ¼ãƒ‰ */
        .word-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .word-card {
            background-color: var(--secondary-dark);
            border-radius: 12px;
            padding: 1.5rem;
            border-left: 5px solid var(--accent-dark);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }

        body.light-mode .word-card {
            background-color: var(--secondary-light);
            border-left-color: var(--accent-light);
        }

        .word-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .word-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .russian-word {
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent-dark);
            margin-bottom: 0.5rem;
        }

        body.light-mode .russian-word {
            color: var(--accent-light);
        }

        .transcription {
            font-size: 1rem;
            color: #a0aec0;
            margin-bottom: 0.5rem;
        }

        body.light-mode .transcription {
            color: #718096;
        }

        .translation {
            font-size: 1.2rem;
            margin: 1rem 0;
            padding: 0.5rem;
            background-color: rgba(0, 0, 0, 0.1);
            border-radius: 6px;
        }

        body.light-mode .translation {
            background-color: rgba(0, 0, 0, 0.05);
        }

        .audio-btn {
            padding: 0.5rem 1rem;
            background-color: #48bb78;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        .audio-btn:hover {
            background-color: #38a169;
        }

        .category {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background-color: var(--accent-dark);
            color: white;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-top: 0.5rem;
        }

        body.light-mode .category {
            background-color: var(--accent-light);
        }

        /* ãƒ•ãƒƒã‚¿ãƒ¼ */
        footer {
            background-color: var(--secondary-dark);
            color: var(--text-dark);
            text-align: center;
            padding: 2rem;
            margin-top: 3rem;
            border-top: 3px solid var(--accent-dark);
        }

        body.light-mode footer {
            background-color: var(--secondary-light);
            color: var(--text-light);
            border-top-color: var(--accent-light);
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .contact-link {
            color: var(--accent-dark);
            text-decoration: none;
            font-weight: 600;
            margin-top: 1rem;
            display: inline-block;
        }

        body.light-mode .contact-link {
            color: var(--accent-light);
        }

        .contact-link:hover {
            text-decoration: underline;
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
        @media (max-width: 768px) {
            .word-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }
            
            .controls {
                flex-direction: column;
            }
        }

        @media (max-width: 480px) {
            .word-grid {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 1rem;
            }
        }

        /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° */
        .loading {
            text-align: center;
            padding: 2rem;
            font-size: 1.2rem;
        }

        /* é€šçŸ¥ */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--accent-dark);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
            display: none;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        body.light-mode .notification {
            background-color: var(--accent-light);
        }
    </style>
</head>
<body class="dark-mode">
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header>
        <div class="header-content">
            <h1>ğŸ‡·ğŸ‡º ãƒ­ã‚·ã‚¢èªåŸºæœ¬å˜èª100</h1>
            <div class="control-group">
                <button id="themeToggle" class="mode-btn">
                    <span id="themeIcon">â˜€ï¸</span>
                    <span id="themeText">ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰</span>
                </button>
                <button id="languageToggle" class="mode-btn">
                    <span id="languageIcon">ğŸ‡¯ğŸ‡µ</span>
                    <span id="languageText">æ—¥æœ¬èªè¡¨ç¤º</span>
                </button>
            </div>
        </div>
    </header>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <div class="container">
        <div class="controls">
            <div class="control-group">
                <button id="playAllAudio" class="audio-btn">
                    ğŸ”Š å…¨ã¦ã®éŸ³å£°ã‚’å†ç”Ÿ
                </button>
                <button id="shuffleWords">
                    ğŸ”€ å˜èªã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«
                </button>
            </div>
        </div>

        <div class="word-grid" id="wordGrid">
            <!-- å˜èªã‚«ãƒ¼ãƒ‰ã¯JavaScriptã§ç”Ÿæˆ -->
        </div>
    </div>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer>
        <div class="footer-content">
            <p>Contact us</p>
            <a href="mailto:mementomorikatsu@gmail.com" class="contact-link">
                mementomorikatsu@gmail.com
            </a>
            <p style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.8;">
                ã“ã®ã‚¢ãƒ—ãƒªã¯ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã—ã¦ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ä½¿ç”¨ã§ãã¾ã™
            </p>
        </div>
    </footer>

    <!-- é€šçŸ¥ -->
    <div id="notification" class="notification"></div>

    <script>
        // å˜èªãƒ‡ãƒ¼ã‚¿
        const words = [
            {
                category: "ä»£åè©",
                russian: "Ğ¯",
                transcription: "(Ya)",
                english: "I",
                japanese: "ç§"
            },
            {
                category: "ä»£åè©",
                russian: "Ğ¢Ñ‹",
                transcription: "(Ty)",
                english: "You (singular, informal)",
                japanese: "ã‚ãªãŸ (è¦ªã—ã„é–“æŸ„)"
            },
            {
                category: "ä»£åè©",
                russian: "ĞĞ½",
                transcription: "(On)",
                english: "He",
                japanese: "å½¼"
            },
            {
                category: "ä»£åè©",
                russian: "ĞĞ½Ğ°",
                transcription: "(Ona)",
                english: "She",
                japanese: "å½¼å¥³"
            },
            {
                category: "ä»£åè©",
                russian: "ĞœÑ‹",
                transcription: "(My)",
                english: "We",
                japanese: "ç§ãŸã¡"
            },
            {
                category: "ä»£åè©",
                russian: "Ğ’Ñ‹",
                transcription: "(Vy)",
                english: "You (plural/formal)",
                japanese: "ã‚ãªãŸæ–¹ / ã‚ãªãŸ (æ•¬èª)"
            },
            {
                category: "ä»£åè©",
                russian: "ĞĞ½Ğ¸",
                transcription: "(Oni)",
                english: "They",
                japanese: "å½¼ã‚‰ / å½¼å¥³ã‚‰"
            },
            {
                category: "ç–‘å•è©",
                russian: "Ğ§Ñ‚Ğ¾",
                transcription: "(Chto)",
                english: "What",
                japanese: "ä½•"
            },
            {
                category: "ç–‘å•è©",
                russian: "ĞšÑ‚Ğ¾",
                transcription: "(Kto)",
                english: "Who",
                japanese: "èª°"
            },
            {
                category: "ç–‘å•è©",
                russian: "Ğ“Ğ´Ğµ",
                transcription: "(Gde)",
                english: "Where",
                japanese: "ã©ã“"
            },
            {
                category: "ç–‘å•è©",
                russian: "ĞšĞ¾Ğ³Ğ´Ğ°",
                transcription: "(Kogda)",
                english: "When",
                japanese: "ã„ã¤"
            },
            {
                category: "ç–‘å•è©",
                russian: "ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ",
                transcription: "(Pochemu)",
                english: "Why",
                japanese: "ãªãœ"
            },
            {
                category: "ç–‘å•è©",
                russian: "ĞšĞ°Ğº",
                transcription: "(Kak)",
                english: "How",
                japanese: "ã©ã®ã‚ˆã†ã«"
            },
            {
                category: "å‹•è©",
                russian: "Ğ‘Ñ‹Ñ‚ÑŒ",
                transcription: "(Byt')",
                english: "To be",
                japanese: "ï½ã§ã‚ã‚‹"
            },
            {
                category: "å‹•è©",
                russian: "Ğ˜Ğ¼ĞµÑ‚ÑŒ",
                transcription: "(Imat')",
                english: "To have",
                japanese: "æŒã£ã¦ã„ã‚‹"
            },
            {
                category: "å‹•è©",
                russian: "Ğ”ĞµĞ»Ğ°Ñ‚ÑŒ",
                transcription: "(Delat')",
                english: "To do / To make",
                japanese: "ã™ã‚‹ / ä½œã‚‹"
            },
            {
                category: "å‹•è©",
                russian: "Ğ“Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚ÑŒ",
                transcription: "(Govorit')",
                english: "To speak / To say",
                japanese: "è©±ã™ / è¨€ã†"
            },
            {
                category: "å‹•è©",
                russian: "Ğ—Ğ½Ğ°Ñ‚ÑŒ",
                transcription: "(Znat')",
                english: "To know",
                japanese: "çŸ¥ã£ã¦ã„ã‚‹"
            },
            {
                category: "å‹•è©",
                russian: "ĞŸĞ¾Ğ½Ğ¸Ğ¼Ğ°Ñ‚ÑŒ",
                transcription: "(PonimÃ¡t')",
                english: "To understand",
                japanese: "ç†è§£ã™ã‚‹"
            },
            {
                category: "å‹•è©",
                russian: "Ğ¥Ğ¾Ñ‚ĞµÑ‚ÑŒ",
                transcription: "(Khotet')",
                english: "To want",
                japanese: "æ¬²ã—ã„"
            },
            {
                category: "å‹•è©",
                russian: "ĞœĞ¾Ñ‡ÑŒ",
                transcription: "(Moch')",
                english: "To be able to / Can",
                japanese: "ã§ãã‚‹"
            },
            {
                category: "å‹•è©",
                russian: "Ğ•ÑÑ‚ÑŒ",
                transcription: "(Est')",
                english: "To eat",
                japanese: "é£Ÿã¹ã‚‹"
            },
            {
                category: "å‹•è©",
                russian: "ĞŸĞ¸Ñ‚ÑŒ",
                transcription: "(Pit')",
                english: "To drink",
                japanese: "é£²ã‚€"
            },
            {
                category: "å‹•è©",
                russian: "Ğ˜Ğ´Ñ‚Ğ¸",
                transcription: "(Idti)",
                english: "To go (by walking)",
                japanese: "æ­©ã„ã¦è¡Œã"
            },
            {
                category: "å‹•è©",
                russian: "Ğ’Ğ¸Ğ´ĞµÑ‚ÑŒ",
                transcription: "(Videt')",
                english: "To see",
                japanese: "è¦‹ã‚‹"
            },
            {
                category: "å‹•è©",
                russian: "Ğ¡Ğ»Ñ‹ÑˆĞ°Ñ‚ÑŒ",
                transcription: "(Slyshat')",
                english: "To hear",
                japanese: "èã"
            },
            {
                category: "å‹•è©",
                russian: "Ğ›ÑĞ±Ğ¸Ñ‚ÑŒ",
                transcription: "(Lyubit')",
                english: "To love / To like",
                japanese: "æ„›ã™ã‚‹ / å¥½ã"
            },
            {
                category: "å‹•è©",
                russian: "Ğ–Ğ¸Ñ‚ÑŒ",
                transcription: "(Zhit')",
                english: "To live",
                japanese: "ä½ã‚€ / ç”Ÿãã‚‹"
            },
            {
                category: "å‹•è©",
                russian: "Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ",
                transcription: "(Rabotat')",
                english: "To work",
                japanese: "åƒã"
            },
            {
                category: "å‹•è©",
                russian: "Ğ£Ñ‡Ğ¸Ñ‚ÑŒÑÑ",
                transcription: "(Uchit'sya)",
                english: "To study / To learn",
                japanese: "å‹‰å¼·ã™ã‚‹ / å­¦ã¶"
            },
            {
                category: "å‹•è©",
                russian: "Ğ§Ğ¸Ñ‚Ğ°Ñ‚ÑŒ",
                transcription: "(Chitat')",
                english: "To read",
                japanese: "èª­ã‚€"
            },
            {
                category: "å‹•è©",
                russian: "ĞŸĞ¸ÑĞ°Ñ‚ÑŒ",
                transcription: "(Pisat')",
                english: "To write",
                japanese: "æ›¸ã"
            },
            {
                category: "åè©",
                russian: "Ğ§ĞµĞ»Ğ¾Ğ²ĞµĞº",
                transcription: "(Chelovek)",
                english: "Person",
                japanese: "äºº"
            },
            {
                category: "åè©",
                russian: "Ğ’Ñ€ĞµĞ¼Ñ",
                transcription: "(Vremya)",
                english: "Time",
                japanese: "æ™‚é–“"
            },
            {
                category: "åè©",
                russian: "Ğ”ĞµĞ½ÑŒ",
                transcription: "(Den')",
                english: "Day",
                japanese: "æ—¥"
            },
            {
                category: "åè©",
                russian: "ĞĞ¾Ñ‡ÑŒ",
                transcription: "(Noch')",
                english: "Night",
                japanese: "å¤œ"
            },
            {
                category: "åè©",
                russian: "Ğ“Ğ¾Ğ´",
                transcription: "(God)",
                english: "Year",
                japanese: "å¹´"
            },
            {
                category: "åè©",
                russian: "Ğ”Ğ¾Ğ¼",
                transcription: "(Dom)",
                english: "House / Home",
                japanese: "å®¶"
            },
            {
                category: "åè©",
                russian: "Ğ’Ğ¾Ğ´Ğ°",
                transcription: "(Voda)",
                english: "Water",
                japanese: "æ°´"
            },
            {
                category: "åè©",
                russian: "Ğ•Ğ´Ğ°",
                transcription: "(Eda)",
                english: "Food",
                japanese: "é£Ÿã¹ç‰©"
            },
            {
                category: "åè©",
                russian: "Ğ”Ñ€ÑƒĞ³",
                transcription: "(Drug)",
                english: "Friend (male)",
                japanese: "å‹é” (ç”·æ€§)"
            },
            {
                category: "åè©",
                russian: "Ğ˜Ğ¼Ñ",
                transcription: "(Imya)",
                english: "Name",
                japanese: "åå‰"
            },
            {
                category: "å½¢å®¹è©",
                russian: "Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¸Ğ¹",
                transcription: "(Khoroshiy)",
                english: "Good",
                japanese: "è‰¯ã„"
            },
            {
                category: "å½¢å®¹è©",
                russian: "ĞŸĞ»Ğ¾Ñ…Ğ¾Ğ¹",
                transcription: "(Plokhoy)",
                english: "Bad",
                japanese: "æ‚ªã„"
            },
            {
                category: "å½¢å®¹è©",
                russian: "Ğ‘Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹",
                transcription: "(Bol'shoy)",
                english: "Big / Large",
                japanese: "å¤§ãã„"
            },
            {
                category: "å½¢å®¹è©",
                russian: "ĞœĞ°Ğ»ĞµĞ½ÑŒĞºĞ¸Ğ¹",
                transcription: "(Malen'kiy)",
                english: "Small / Little",
                japanese: "å°ã•ã„"
            },
            {
                category: "å½¢å®¹è©",
                russian: "ĞĞ¾Ğ²Ñ‹Ğ¹",
                transcription: "(Novyy)",
                english: "New",
                japanese: "æ–°ã—ã„"
            },
            {
                category: "å½¢å®¹è©",
                russian: "Ğ¡Ñ‚Ğ°Ñ€Ñ‹Ğ¹",
                transcription: "(Staryy)",
                english: "Old",
                japanese: "å¤ã„ / å¹´è€ã„ãŸ"
            },
            {
                category: "å½¢å®¹è©",
                russian: "ĞšÑ€Ğ°ÑĞ¸Ğ²Ñ‹Ğ¹",
                transcription: "(Krasivyy)",
                english: "Beautiful",
                japanese: "ç¾ã—ã„"
            },
            {
                category: "å½¢å®¹è©",
                russian: "Ğ’Ğ°Ğ¶Ğ½Ñ‹Ğ¹",
                transcription: "(Vazhnyy)",
                english: "Important",
                japanese: "é‡è¦ãª"
            },
            {
                category: "å½¢å®¹è©",
                russian: "Ğ¢Ñ€ÑƒĞ´Ğ½Ñ‹Ğ¹",
                transcription: "(Trudnyy)",
                english: "Difficult",
                japanese: "é›£ã—ã„"
            },
            {
                category: "å½¢å®¹è©",
                russian: "Ğ›Ñ‘Ğ³ĞºĞ¸Ğ¹",
                transcription: "(Lyogkiy)",
                english: "Easy / Light",
                japanese: "ç°¡å˜ãª / è»½ã„"
            },
            {
                category: "å‰¯è©ãƒ»å‰ç½®è©",
                russian: "Ğ—Ğ´ĞµÑÑŒ",
                transcription: "(Zdes')",
                english: "Here",
                japanese: "ã“ã“"
            },
            {
                category: "å‰¯è©ãƒ»å‰ç½®è©",
                russian: "Ğ¢Ğ°Ğ¼",
                transcription: "(Tam)",
                english: "There",
                japanese: "ãã“ / ã‚ãã“"
            },
            {
                category: "å‰¯è©ãƒ»å‰ç½®è©",
                russian: "Ğ¡ĞµĞ¹Ñ‡Ğ°Ñ",
                transcription: "(Seychas)",
                english: "Now",
                japanese: "ä»Š"
            },
            {
                category: "å‰¯è©ãƒ»å‰ç½®è©",
                russian: "Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ",
                transcription: "(Segodnya)",
                english: "Today",
                japanese: "ä»Šæ—¥"
            },
            {
                category: "å‰¯è©ãƒ»å‰ç½®è©",
                russian: "Ğ—Ğ°Ğ²Ñ‚Ñ€Ğ°",
                transcription: "(Zavtra)",
                english: "Tomorrow",
                japanese: "æ˜æ—¥"
            },
            {
                category: "å‰¯è©ãƒ»å‰ç½®è©",
                russian: "Ğ’Ñ‡ĞµÑ€Ğ°",
                transcription: "(Vchera)",
                english: "Yesterday",
                japanese: "æ˜¨æ—¥"
            },
            {
                category: "å‰¯è©ãƒ»å‰ç½®è©",
                russian: "ĞÑ‡ĞµĞ½ÑŒ",
                transcription: "(Ochen')",
                english: "Very",
                japanese: "ã¨ã¦ã‚‚"
            },
            {
                category: "å‰¯è©ãƒ»å‰ç½®è©",
                russian: "Ğ”Ğ°",
                transcription: "(Da)",
                english: "Yes",
                japanese: "ã¯ã„"
            },
            {
                category: "å‰¯è©ãƒ»å‰ç½®è©",
                russian: "ĞĞµÑ‚",
                transcription: "(Net)",
                english: "No",
                japanese: "ã„ã„ãˆ"
            },
            {
                category: "å‰¯è©ãƒ»å‰ç½®è©",
                russian: "ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°",
                transcription: "(Pozhaluysta)",
                english: "Please / You're welcome",
                japanese: "ãŠé¡˜ã„ã—ã¾ã™ / ã©ã†ã„ãŸã—ã¾ã—ã¦"
            },
            {
                category: "å‰¯è©ãƒ»å‰ç½®è©",
                russian: "Ğ¡Ğ¿Ğ°ÑĞ¸Ğ±Ğ¾",
                transcription: "(Spasibo)",
                english: "Thank you",
                japanese: "ã‚ã‚ŠãŒã¨ã†"
            },
            {
                category: "å‰¯è©ãƒ»å‰ç½®è©",
                russian: "Ğ˜Ğ·Ğ²Ğ¸Ğ½Ğ¸Ñ‚Ğµ",
                transcription: "(Izvinite)",
                english: "Excuse me / Sorry",
                japanese: "ã™ã¿ã¾ã›ã‚“ / ã”ã‚ã‚“ãªã•ã„"
            },
            {
                category: "æ•°å­—",
                russian: "ĞĞ´Ğ¸Ğ½",
                transcription: "(Odin)",
                english: "One",
                japanese: "1"
            },
            {
                category: "æ•°å­—",
                russian: "Ğ”Ğ²Ğ°",
                transcription: "(Dva)",
                english: "Two",
                japanese: "2"
            },
            {
                category: "æ•°å­—",
                russian: "Ğ¢Ñ€Ğ¸",
                transcription: "(Tri)",
                english: "Three",
                japanese: "3"
            },
            {
                category: "æ•°å­—",
                russian: "Ğ§ĞµÑ‚Ñ‹Ñ€Ğµ",
                transcription: "(Chetyre)",
                english: "Four",
                japanese: "4"
            },
            {
                category: "æ•°å­—",
                russian: "ĞŸÑÑ‚ÑŒ",
                transcription: "(Pyat')",
                english: "Five",
                japanese: "5"
            },
            {
                category: "æ•°å­—",
                russian: "Ğ¨ĞµÑÑ‚ÑŒ",
                transcription: "(Shest')",
                english: "Six",
                japanese: "6"
            },
            {
                category: "æ•°å­—",
                russian: "Ğ¡ĞµĞ¼ÑŒ",
                transcription: "(Sem')",
                english: "Seven",
                japanese: "7"
            },
            {
                category: "æ•°å­—",
                russian: "Ğ’Ğ¾ÑĞµĞ¼ÑŒ",
                transcription: "(Vosem')",
                english: "Eight",
                japanese: "8"
            },
            {
                category: "æ•°å­—",
                russian: "Ğ”ĞµĞ²ÑÑ‚ÑŒ",
                transcription: "(Devyat')",
                english: "Nine",
                japanese: "9"
            },
            {
                category: "æ•°å­—",
                russian: "Ğ”ĞµÑÑÑ‚ÑŒ",
                transcription: "(Desyat')",
                english: "Ten",
                japanese: "10"
            }
        ];

        // ã‚¢ãƒ—ãƒªçŠ¶æ…‹
        const appState = {
            darkMode: true,
            englishMode: true,
            speechEnabled: 'speechSynthesis' in window
        };

        // DOMè¦ç´ 
        const wordGrid = document.getElementById('wordGrid');
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = document.getElementById('themeIcon');
        const themeText = document.getElementById('themeText');
        const languageToggle = document.getElementById('languageToggle');
        const languageIcon = document.getElementById('languageIcon');
        const languageText = document.getElementById('languageText');
        const playAllAudioBtn = document.getElementById('playAllAudio');
        const shuffleWordsBtn = document.getElementById('shuffleWords');
        const notification = document.getElementById('notification');

        // åˆæœŸåŒ–
        function initApp() {
            loadPreferences();
            renderWords();
            setupEventListeners();
            setupServiceWorker();
            showNotification('ã‚¢ãƒ—ãƒªã®æº–å‚™ãŒã§ãã¾ã—ãŸï¼', 'success');
        }

        // è¨­å®šã®èª­ã¿è¾¼ã¿
        function loadPreferences() {
            const savedDarkMode = localStorage.getItem('darkMode');
            const savedEnglishMode = localStorage.getItem('englishMode');
            
            if (savedDarkMode !== null) {
                appState.darkMode = savedDarkMode === 'true';
            }
            
            if (savedEnglishMode !== null) {
                appState.englishMode = savedEnglishMode === 'true';
            }
            
            updateTheme();
            updateLanguage();
        }

        // å˜èªã®è¡¨ç¤º
        function renderWords() {
            wordGrid.innerHTML = '';
            
            words.forEach((word, index) => {
                const card = document.createElement('div');
                card.className = 'word-card';
                card.innerHTML = `
                    <div class="word-header">
                        <span class="category">${word.category}</span>
                        <button class="audio-btn play-audio" data-index="${index}">
                            ğŸ”Š å†ç”Ÿ
                        </button>
                    </div>
                    <div class="russian-word">${word.russian}</div>
                    <div class="transcription">${word.transcription}</div>
                    <div class="translation" id="translation-${index}">
                        ${appState.englishMode ? word.english : word.japanese}
                    </div>
                `;
                
                wordGrid.appendChild(card);
            });
            
            // éŸ³å£°å†ç”Ÿãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
            document.querySelectorAll('.play-audio').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const index = parseInt(e.target.dataset.index);
                    speakRussian(words[index].russian);
                });
            });
            
            // ã‚«ãƒ¼ãƒ‰ã‚¯ãƒªãƒƒã‚¯ã§ç¿»è¨³ã‚’åˆ‡ã‚Šæ›¿ãˆ
            document.querySelectorAll('.word-card').forEach((card, index) => {
                card.addEventListener('click', () => {
                    const translationEl = document.getElementById(`translation-${index}`);
                    const currentText = translationEl.textContent;
                    const word = words[index];
                    
                    if (currentText === word.english) {
                        translationEl.textContent = word.japanese;
                    } else {
                        translationEl.textContent = word.english;
                    }
                });
            });
        }

        // éŸ³å£°åˆæˆ
        function speakRussian(text) {
            if (!appState.speechEnabled) {
                showNotification('éŸ³å£°åˆæˆãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“', 'error');
                return;
            }
            
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'ru-RU';
            utterance.rate = 0.8;
            utterance.pitch = 1;
            utterance.volume = 1;
            
            // åˆ©ç”¨å¯èƒ½ãªéŸ³å£°ã‹ã‚‰ãƒ­ã‚·ã‚¢èªéŸ³å£°ã‚’æ¢ã™
            const voices = speechSynthesis.getVoices();
            const russianVoice = voices.find(voice => 
                voice.lang.startsWith('ru') || voice.name.includes('Russian')
            );
            
            if (russianVoice) {
                utterance.voice = russianVoice;
            }
            
            speechSynthesis.speak(utterance);
            
            utterance.onstart = () => {
                showNotification(`ç™ºéŸ³: ${text}`, 'info');
            };
            
            utterance.onerror = (event) => {
                console.error('Speech synthesis error:', event);
                showNotification('éŸ³å£°å†ç”Ÿã«å¤±æ•—ã—ã¾ã—ãŸ', 'error');
            };
        }

        // å…¨ã¦ã®éŸ³å£°ã‚’å†ç”Ÿ
        function playAllAudio() {
            if (!appState.speechEnabled) {
                showNotification('éŸ³å£°åˆæˆãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“', 'error');
                return;
            }
            
            let index = 0;
            
            function playNext() {
                if (index < words.length) {
                    const word = words[index];
                    speakRussian(word.russian);
                    
                    // æ¬¡ã®å˜èªã‚’å†ç”Ÿï¼ˆå°‘ã—é–“éš”ã‚’ã‚ã‘ã¦ï¼‰
                    index++;
                    setTimeout(playNext, 2000);
                }
            }
            
            playNext();
            showNotification('å…¨ã¦ã®å˜èªã®ç™ºéŸ³ã‚’é †ç•ªã«å†ç”Ÿã—ã¾ã™', 'info');
        }

        // å˜èªã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«
        function shuffleWords() {
            for (let i = words.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [words[i], words[j]] = [words[j], words[i]];
            }
            renderWords();
            showNotification('å˜èªã®é †åºã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã—ã¾ã—ãŸ', 'info');
        }

        // ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆ
        function toggleTheme() {
            appState.darkMode = !appState.darkMode;
            updateTheme();
            localStorage.setItem('darkMode', appState.darkMode);
        }

        function updateTheme() {
            if (appState.darkMode) {
                document.body.classList.remove('light-mode');
                document.body.classList.add('dark-mode');
                themeIcon.textContent = 'â˜€ï¸';
                themeText.textContent = 'ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰';
            } else {
                document.body.classList.remove('dark-mode');
                document.body.classList.add('light-mode');
                themeIcon.textContent = 'ğŸŒ™';
                themeText.textContent = 'ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰';
            }
        }

        // è¨€èªåˆ‡ã‚Šæ›¿ãˆ
        function toggleLanguage() {
            appState.englishMode = !appState.englishMode;
            updateLanguage();
            localStorage.setItem('englishMode', appState.englishMode);
            renderWords();
        }

        function updateLanguage() {
            if (appState.englishMode) {
                languageIcon.textContent = 'ğŸ‡¯ğŸ‡µ';
                languageText.textContent = 'æ—¥æœ¬èªè¡¨ç¤º';
            } else {
                languageIcon.textContent = 'ğŸ‡ºğŸ‡¸';
                languageText.textContent = 'è‹±èªè¡¨ç¤º';
            }
        }

        // é€šçŸ¥è¡¨ç¤º
        function showNotification(message, type = 'info') {
            notification.textContent = message;
            notification.style.display = 'block';
            
            // ã‚¿ã‚¤ãƒ—ã«å¿œã˜ãŸã‚¹ã‚¿ã‚¤ãƒ«
            notification.style.backgroundColor = type === 'error' ? '#e53e3e' : 
                                               type === 'success' ? '#38a169' : 
                                               '#4299e1';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š
        function setupEventListeners() {
            themeToggle.addEventListener('click', toggleTheme);
            languageToggle.addEventListener('click', toggleLanguage);
            playAllAudioBtn.addEventListener('click', playAllAudio);
            shuffleWordsBtn.addEventListener('click', shuffleWords);
            
            // éŸ³å£°ãƒªã‚¹ãƒˆã®æº–å‚™ã‚’å¾…ã¤
            if (appState.speechEnabled) {
                speechSynthesis.onvoiceschanged = () => {
                    console.log('Voices loaded');
                };
            }
            
            // PWAã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒœã‚¿ãƒ³ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                // ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä¿å­˜ã—ã¦å¾Œã§ä½¿ç”¨å¯èƒ½
                window.deferredPrompt = e;
                
                // ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
                showNotification('ã“ã®ã‚¢ãƒ—ãƒªã‚’ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã§ãã¾ã™', 'info');
            });
        }

        // Service Workerã®è¨­å®š
        function setupServiceWorker() {
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                    navigator.serviceWorker.register('sw.js')
                        .then(registration => {
                            console.log('ServiceWorkerç™»éŒ²æˆåŠŸ:', registration.scope);
                        })
                        .catch(error => {
                            console.log('ServiceWorkerç™»éŒ²å¤±æ•—:', error);
                        });
                });
            }
        }

        // ã‚¢ãƒ—ãƒªã®åˆæœŸåŒ–
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
